<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
	layout:decorator="layout">
<head>
<style type="text/css">
.accordion-msg {
	border-top: none;
}

@media only screen and (max-width: 750px) {
	.text-right {
		display: inherit;
	}
}
</style>
</head>
<body>
	<div class="top-bar clearfix" layout:fragment="page_header_container">
		<!-- Page-header start -->
		<div class="page-header card">
			<div class="row align-items-end">
				<div class="col-lg-8">
					<div class="page-header-title">
						<i class="ti-eye issueList"></i>
						<div class="d-inline">
							<h4>案件一覧</h4>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Page-header end -->

	<!-- Page body start -->
	<div layout:fragment="page_body_container">
		<div class="card">
			<div class="card-block">
				<form th:action="@{/}" method="get" th:object="${issueSearchForm}">
					<!-- <h4 class="sub-title">
						<a class="accordion-msg" data-toggle="collapse"
							data-parent="#accordion" href="#collapseOne" aria-expanded="true"
							aria-controls="collapseOne"> <i class="ti-search"></i>検索
						</a>
					</h4>
					<div id="collapseOne" class="panel-collapse collapse in"
						role="tabpanel" aria-labelledby="headingOne">
						<div class="accordion-content accordion-desc">
							<div class="form-group row">
								<div class="col text-right">
									<label class="col-form-label">店舗名</label>
								</div>
								<div class="col-sm-3">
									<input type="text" class="form-control" th:field="*{shopName}"/>
								</div>
								<div class="col text-right">
									<label class="col-form-label">ステータス</label>
								</div>
								<div class="col-sm-2">
									<select class="form-control select">
										<option value="0">すべて</option>
										<option value="1">受付待ち</option>
										<option value="2">配信中</option>
										<option value="3">配信終了</option>
									</select>
								</div>
								<div class="col text-right">
									<label class="col-form-label">配信媒体</label>
								</div>
								<div class="col-sm-2">
									<select class="form-control select">
										<option value="0">すべて</option>
										<option value="1">Facebook</option>
										<option value="2">Google</option>
										<option value="3">Twitter</option>
										<option value="4">Dsp</option>
									</select>
								</div>
							</div>
							<div class="form-group row">
								<div class="col text-right">
									<label class="col-form-label">キャンペーン名</label>
								</div>
								<div class="col-sm-3">
									<input type="text" class="form-control" th:field="*{campaignName}"/>
								</div>
								<div class="col text-right">
									<label class="col-form-label">配信開始月</label>
								</div>
								<div class="col-sm-2">
									<select class="form-control select">
										<option value="0">すべて</option>
										<option value="1">1月</option>
										<option value="2">2月</option>
										<option value="3">3月</option>
										<option value="4">4月</option>
										<option value="5">5月</option>
										<option value="6">6月</option>
										<option value="7">7月</option>
										<option value="8">8月</option>
										<option value="9">9月</option>
										<option value="10">10月</option>
										<option value="11">11月</option>
										<option value="12">12月</option>
									</select>
								</div>
								<div class="col text-right"></div>
								<div class="col-sm-2"></div>
							</div>
							<div class="form-group row">
								<div class="col-sm-12 text-center">
									<button class="btn btn-primary" type="submit" th:formmethod="post" th:formaction="@{/issues/issueSearch}" style="margin: 10px 0">検索</button>
									<button class="btn btn-warning" type="submit">入力リセット</button>
								</div>
							</div>
						</div>
					</div> -->
					<div class="dt-responsive table-responsive">
						<input type="hidden" class="js-single">
						<table id="tableForIssueList"
							class="table table-striped table-bordered nowrap"
							style="width: 100%;">
							<thead>
								<tr>
									<th>法人名</th>
									<th>店舗名</th>
									<th>名称</th>
									<th>配信媒体</th>
									<th>ステータス</th>
									<th>費用</th>
									<th>配信開始日</th>
									<th>配信終了日</th>
									<th>アクション</th>
								</tr>
							</thead>
							<tfoot>
								<tr>
									<th>法人名</th>
									<th>店舗名</th>
									<th>名称</th>
									<th>配信媒体</th>
									<th>ステータス</th>
									<th>費用</th>
									<th>配信開始日</th>
									<th>配信終了日</th>
									<th>アクション</th>
								</tr>
							</tfoot>
							<tbody>
								<tr th:each="issue : ${issuesDtoList}">
									<td th:text="${issue.corporationName}">法人</td>
									<td th:text="${issue.shopName}">秋葉原店舗</td>
									<td th:text="${issue.campaignName}">キャンペーン名</td>
									<td><label th:class="${issue.mediaIcon}"
										th:text="${issue.media}">媒体</label></td>
									<td><label class="label live">配信中</label></td>
									<td th:text="${issue.budget}">予算</td>
									<td th:text="${issue.startDate}">配信開始日</td>
									<td th:text="${issue.endDate}">配信終了日</td>
									<td>
										<button class="label detail" type="button" onclick="move('1')">
											<i class="ti-bar-chart"></i>詳細
										</button>
										<button class="label delete" type="submit" th:formmethod="post" th:formaction="@{/issues/deleteIssue(issueId=${issue.issueId}, media=${issue.media})}"><i class="ti-trash"></i>削除</button>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</form>
			</div>
		</div>
	</div>
	<!-- Page body end -->
	<div layout:fragment="custom_resource_body">
		<script type="text/javascript">
			function move(obj) {
				switch (obj) {
				case "1":
					window.location = '/reporting/allReporting';
					break;
				case "2":
					window.location = '/reporting/googleReporting';
					break;
				case "3":
					window.location = '/reporting/twitterReporting';
					break;
				case "4":
					window.location = '/reporting/dspReporting';
					break;
				case "5":
					window.location = '/reporting/facebookReporting';
				}

			}

			$(function() {
				$('#tableForIssueList').DataTable({
					scrollY : true,
					scrollX : true,
					paging : false,
					autoFill : true,
					lengthChange : false,
					searching : false,
					'language' : {
						"sEmptyTable" : "テーブルにデータがありません",
						"sInfo" : " _TOTAL_ 件中 _START_ から _END_ まで表示",
						"sInfoEmpty" : " 0 件中 0 から 0 まで表示"
					},
				});
			});
		</script>
	</div>
</body>
</html>