<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" layout:decorator="layout">
<body>
	<div class="top-bar clearfix" layout:fragment="page_header_container">
		<!-- Page-header start -->
		<div class="page-header card">
			<div class="row align-items-end">
				<div class="col-lg-8">
					<div class="page-header-title">
						<i class="fa fa-twitter bg-twiter"></i>
						<div class="d-inline">
							<h4>Twitter蠎�蜻� 繝ｬ繝昴�ｼ繝�繧｣繝ｳ繧ｰ</h4>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Page-header end -->

	<!-- Page body start -->
	<div layout:fragment="page_body_container">
		<form th:action="@{/twitter/reportingList(reportType=1)}" method="post" th:object="${twitterReportInputForm}">
			<div class="card">
				<div class="card-block">
					<h4 class="sub-title">讀懃ｴ｢譚｡莉ｶ</h4>
					<div class="form-group row">
						<div class="col-sm-2 text-right">
							<label class="col-form-label">譯井ｻｶ蜷�</label>
						</div>
						<div class="col-sm-4" th:if="${#lists.isEmpty(campaignIds)}">
							<select class="searchable" multiple="multiple" th:field="${twitterReportInputForm.campaignIds}">
								<option th:each="object : ${campaignIds}" th:value="${object.getFirst()}" th:text="${object.getSecond()}"></option>
							</select>
						</div>
						<div class="col-sm-4" th:unless="${#lists.isEmpty(campaignIds)}" id="redraw">
							<select class="searchable" multiple="multiple" th:field="${twitterReportInputForm.campaignIds}">
								<option th:each="object : ${campaignIds}" th:selected="${#lists.contains(campaignIds)}" th:value="${object.getFirst()}" th:text="${object.getSecond()}"></option>
							</select>
						</div>
					</div>
					<div class="form-radio">
						<div class="form-group row">
							<label class="col-sm-2 col-form-label text-right">譛滄俣</label>
							<div class="radio radio-inline col-sm-2 col-form-label" th:each="object : ${T(jp.acepro.haishinsan.enums.PeriodSet).values()}">
								<label> <input class="form-control" type="radio" th:value="${object.value}" th:field="*{period}" th:text="${object.label}" checked="checked" required="required"> <i class="helper"></i>
								</label>
							</div>
						</div>
					</div>
					<div class="form-group row" id="search">
						<div class="col-sm-2 text-right">
							<label class="col-form-label">髢句ｧ区律</label>
						</div>
						<div class="col-sm-2">
							<input type="date" class="form-control" th:field="${twitterReportInputForm.startDate}">
						</div>
						<div class="col-sm-2 text-right">
							<label class="col-form-label">邨ゆｺ�譌･</label>
						</div>
						<div class="col-sm-2">
							<input type="date" class="form-control" th:field="${twitterReportInputForm.endDate}">
						</div>
					</div>
					<div class="form-group row">
						<div class="col-sm-2 text-right">
							<label class="col-form-label">陦ｨ遉ｺ蛻･</label>
						</div>
						<div class="col-sm-10">
							<button class="btn btn-primary" type="submit" sec:authorize="hasAuthority('TWITTER_REPORT_VIEW')" th:formmethod="post" th:formaction="@{/twitter/reportingList(reportType=1)}">繝�繝舌う繧ｹ</button>
							<button class="btn btn-success" type="submit" sec:authorize="hasAuthority('TWITTER_REPORT_VIEW')" th:formmethod="post" th:formaction="@{/twitter/reportingList(reportType=3)}">蝨ｰ蝓�</button>
							<button class="btn btn-info" type="submit" sec:authorize="hasAuthority('TWITTER_REPORT_VIEW')" th:formmethod="post" th:formaction="@{/twitter/reportingList(reportType=2)}">譌･蛻･</button>
						</div>
					</div>
				</div>
			</div>

			<div th:if="${(reportType != null) && (reportType != '')} ">
				<div class="page-body">
					<div class="row">
						<div class="col-md-12 col-lg-12">
							<div class="card">
								<div class="card-block">
									<h4 class="sub-title">繧ｰ繝ｩ繝�</h4>
								</div>
								<div id="twitter_c3" class="c3"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="card">
					<div class="card-block">
						<h4 class="sub-title">繝�繝ｼ繧ｿ</h4>
						<div class="dt-responsive table-responsive">
							<table th:if="${reportType} == ${T(jp.acepro.haishinsan.enums.ReportType).DEVICE.getValue()}" id="basicTable" class="table table-striped table-hover table-bordered nowrap" style="width: 100%;">
								<thead>
									<tr>
										<th>譯井ｻｶID</th>
										<th>譯井ｻｶ蜷�</th>
										<th>繝�繝舌う繧ｹ</th>
										<th>陦ｨ遉ｺ蝗樊焚</th>
										<th>繧ｯ繝ｪ繝�繧ｯ謨ｰ</th>
										<th>繝輔か繝ｭ繝ｼ繝ｯ繝ｼ謨ｰ</th>
										<th>縺泌茜逕ｨ驥鷹｡�</th>
										<th>CTR</th>
										<th>CPC</th>
										<th>CPM</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="twitterReportingDto : ${twitterReportDisplayDtoList}">
										<td th:text="${twitterReportingDto.campaignId}">2323</td>
										<td th:text="${twitterReportingDto.campaignName}">2323</td>
										<td th:text="${twitterReportingDto.deviceName}">2323</td>
										<td th:text="${twitterReportingDto.impressions}+'蝗�'">1,000,000</td>
										<td th:text="${twitterReportingDto.clicks}+'蝗�'">2323</td>
										<td th:text="${twitterReportingDto.follows}">1</td>
										<td th:text="${twitterReportingDto.costs} + '蜀�'">112</td>
										<td th:text="${twitterReportingDto.ctr} + '%'">191</td>
										<td th:text="${twitterReportingDto.cpc}">191</td>
										<td th:text="${twitterReportingDto.cpm}">191</td>
									</tr>
								</tbody>
								<tfoot>
									<tr>
										<th>譯井ｻｶID</th>
										<th>譯井ｻｶ蜷�</th>
										<th>繝�繝舌う繧ｹ</th>
										<th>陦ｨ遉ｺ蝗樊焚</th>
										<th>繧ｯ繝ｪ繝�繧ｯ謨ｰ</th>
										<th>繝輔か繝ｭ繝ｼ繝ｯ繝ｼ謨ｰ</th>
										<th>縺泌茜逕ｨ驥鷹｡�</th>
										<th>CTR</th>
										<th>CPC</th>
										<th>CPM</th>
									</tr>
								</tfoot>
							</table>
							<table th:if="${reportType} == ${T(jp.acepro.haishinsan.enums.ReportType).REGIONS.getValue()}" id="basicTable" class="table table-striped table-hover table-bordered nowrap" style="width: 100%;">
								<thead>
									<tr>
										<th>譯井ｻｶID</th>
										<th>譯井ｻｶ蜷�</th>
										<th>驛ｽ驕灘ｺ懃恁</th>
										<th>陦ｨ遉ｺ蝗樊焚</th>
										<th>繧ｯ繝ｪ繝�繧ｯ謨ｰ</th>
										<th>繝輔か繝ｭ繝ｼ繝ｯ繝ｼ謨ｰ</th>
										<th>縺泌茜逕ｨ驥鷹｡�</th>
										<th>CTR</th>
										<th>CPC</th>
										<th>CPM</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="twitterReportingDto : ${twitterReportDisplayDtoList}">
										<td th:text="${twitterReportingDto.campaignId}">2323</td>
										<td th:text="${twitterReportingDto.campaignName}">2323</td>
										<td th:text="${twitterReportingDto.locationName}">2323</td>
										<td th:text="${twitterReportingDto.impressions}+'蝗�'">1,000,000</td>
										<td th:text="${twitterReportingDto.clicks}+'蝗�'">2323</td>
										<td th:text="${twitterReportingDto.follows}">1</td>
										<td th:text="${twitterReportingDto.costs} + '蜀�'">112</td>
										<td th:text="${twitterReportingDto.ctr} + '%'">191</td>
										<td th:text="${twitterReportingDto.cpc}">191</td>
										<td th:text="${twitterReportingDto.cpm}">191</td>
									</tr>
								</tbody>
								<tfoot>
									<tr>
										<th>譯井ｻｶID</th>
										<th>譯井ｻｶ蜷�</th>
										<th>驛ｽ驕灘ｺ懃恁</th>
										<th>陦ｨ遉ｺ蝗樊焚</th>
										<th>繧ｯ繝ｪ繝�繧ｯ謨ｰ</th>
										<th>繝輔か繝ｭ繝ｼ繝ｯ繝ｼ謨ｰ</th>
										<th>縺泌茜逕ｨ驥鷹｡�</th>
										<th>CTR</th>
										<th>CPC</th>
										<th>CPM</th>
									</tr>
								</tfoot>
							</table>
							<table th:if="${reportType} == ${T(jp.acepro.haishinsan.enums.ReportType).DATE.getValue()}" id="basicTable" class="table table-striped table-hover table-bordered nowrap" style="width: 100%;">
								<thead>
									<tr>
										<th>譯井ｻｶID</th>
										<th>譯井ｻｶ蜷�</th>
										<th>譌･莉�</th>
										<th>陦ｨ遉ｺ蝗樊焚</th>
										<th>繧ｯ繝ｪ繝�繧ｯ謨ｰ</th>
										<th>繝輔か繝ｭ繝ｼ繝ｯ繝ｼ謨ｰ</th>
										<th>縺泌茜逕ｨ驥鷹｡�</th>
										<th>CTR</th>
										<th>CPC</th>
										<th>CPM</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="twitterReportingDto : ${twitterReportDisplayDtoList}">
										<td th:text="${twitterReportingDto.campaignId}">2323</td>
										<td th:text="${twitterReportingDto.campaignName}">2323</td>
										<td th:text="${twitterReportingDto.day}">2323</td>
										<td th:text="${twitterReportingDto.impressions}+'蝗�'">1,000,000</td>
										<td th:text="${twitterReportingDto.clicks}+'蝗�'">2323</td>
										<td th:text="${twitterReportingDto.follows}">1</td>
										<td th:text="${twitterReportingDto.costs} + '蜀�'">112</td>
										<td th:text="${twitterReportingDto.ctr} + '%'">191</td>
										<td th:text="${twitterReportingDto.cpc}">191</td>
										<td th:text="${twitterReportingDto.cpm}">191</td>
									</tr>
								</tbody>
								<tfoot>
									<tr>
										<th>譯井ｻｶID</th>
										<th>譯井ｻｶ蜷�</th>
										<th>譌･莉�</th>
										<th>陦ｨ遉ｺ蝗樊焚</th>
										<th>繧ｯ繝ｪ繝�繧ｯ謨ｰ</th>
										<th>繝輔か繝ｭ繝ｼ繝ｯ繝ｼ謨ｰ</th>
										<th>縺泌茜逕ｨ驥鷹｡�</th>
										<th>CTR</th>
										<th>CPC</th>
										<th>CPM</th>
									</tr>
								</tfoot>
							</table>
						</div>
						<div class="form-group row">
							<div class="col-sm-12 text-center">
								<button class="btn btn-success" th:formaction="@{/twitter/download(reportType=${reportType})}" th:formmethod="Post">CSV繝�繧ｦ繝ｳ繝ｭ繝ｼ繝�</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
	<!-- page body end -->

	<div layout:fragment="custom_resource_body">
		<script type="text/javascript" th:inline="javascript">
			/*<![CDATA[*/
			window.onload = function() {


				// 繧ｰ繝ｩ繝墓緒逕ｻ
				var chart = c3.generate({
					bindto : '#twitter_c3',
					data : {
						x : 'x',
						columns : [
						/*[[${twitterGraphReportDto.reportTypeList}]]*/,
						/*[[${twitterGraphReportDto.impressionList}]]*/,
						/*[[${twitterGraphReportDto.clicksList}]]*/,
						/*[[${twitterGraphReportDto.followsList}]]*/,
						/*[[${twitterGraphReportDto.priceList}]]*/,
						/*[[${twitterGraphReportDto.CTRList}]]*/,
						/*[[${twitterGraphReportDto.CPCList}]]*/,
						/*[[${twitterGraphReportDto.CPMList}]]*/
						],
						type : 'bar',
						names : {
							impressions : '陦ｨ遉ｺ蝗樊焚',
							follows : '繝輔か繝ｭ繝ｯ繝ｼ謨ｰ',
							clicks : '繧ｯ繝ｪ繝�繧ｯ蝗樊焚',
							costs : '雋ｻ逕ｨ',
							ctr : 'CTR',
							cpc : 'CPC',
							cpm : 'CPM'
						},
						types : {
							ctr : 'line',
							cpc : 'line',
							cpm : 'line'
						}
					},
					axis : {
						x : {
							type : 'category',
							tick : {
								rotate : -35,
								multiline : true
							},
							height : 80
						}
					}
				});
			}
			/*]]>*/
		</script>
		<script type="text/javascript">
			$(document).ready(function() {
				if ($('[id=period1]').prop('checked')) {
					$('[id=search]').hide();
				}
				if ($('[id=period2]').prop('checked')) {
					$('[id=search]').show();
				}
			});
			$(document).ready(function() {
				$('[name="period"]:radio').change(function() {
					if ($('[id=period1]').prop('checked')) {
						$('[id=search]').fadeOut();
					}
					if ($('[id=period2]').prop('checked')) {
						$('[id=search]').fadeIn();
					}
				});
			});
		</script>
	</div>
</body>
</html>